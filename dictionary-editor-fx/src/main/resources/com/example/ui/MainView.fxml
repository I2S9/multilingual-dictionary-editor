<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Menu?>
<?import javafx.scene.control.MenuBar?>
<?import javafx.scene.control.MenuItem?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.SeparatorMenuItem?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TreeView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.ui.MainController"
            styleClass="root">

  <top>
    <MenuBar BorderPane.alignment="CENTER" styleClass="top-menu">
      <menus>
        <Menu text="Fichier">
          <items>
            <MenuItem text="Nouveau" onAction="#onNewDictionary"/>
            <MenuItem text="Ouvrir…" onAction="#onImportLift"/>
            <Menu fx:id="recentMenu" text="Ouvrir récent"/>
            <SeparatorMenuItem/>
            <MenuItem text="Enregistrer" onAction="#onSave"/>
            <MenuItem text="Enregistrer sous…" onAction="#onSaveAs"/>
            <SeparatorMenuItem/>
            <MenuItem text="Paramètres" onAction="#onPreferences"/>
            <SeparatorMenuItem/>
            <MenuItem text="Quitter" onAction="#onQuit"/>
          </items>
        </Menu>
        <Menu text="Édition">
          <items>
            <MenuItem text="Copier" onAction="#onCopy"/>
            <MenuItem text="Coller" onAction="#onPaste"/>
            <MenuItem text="Couper" onAction="#onCut"/>
          </items>
        </Menu>
        <Menu text="Vue">
          <items>
            <Menu text="Objets">
              <items>
                <MenuItem text="Entrées" onAction="#onViewEntries"/>
                <MenuItem text="Sens" onAction="#onViewSenses"/>
                <MenuItem text="Exemples" onAction="#onViewExamples"/>
                <MenuItem text="Notes" onAction="#onViewNotes"/>
                <MenuItem text="Variantes" onAction="#onViewVariants"/>
                <MenuItem text="Étymologies" onAction="#onViewEtymologies"/>
              </items>
            </Menu>
            <Menu text="Langues">
              <items>
                <MenuItem text="Langues objet" onAction="#onViewObjectLangs"/>
                <MenuItem text="Méta-langues" onAction="#onViewMetaLangs"/>
              </items>
            </Menu>
            <Menu text="Navigateur de catégories">
              <items>
                <MenuItem text="Trait" onAction="#onViewTraits"/>
                <MenuItem text="Annotation" onAction="#onViewAnnotations"/>
                <MenuItem text="Field" onAction="#onViewFields"/>
              </items>
            </Menu>
          </items>
        </Menu>
        <Menu text="Configuration des champs">
          <items>
            <MenuItem text="Types de notes" onAction="#onConfigNoteTypes"/>
            <MenuItem text="Types de traductions" onAction="#onConfigTranslationTypes"/>
            <MenuItem text="Langues" onAction="#onConfigLanguages"/>
            <MenuItem text="Types de trait" onAction="#onConfigTraitTypes"/>
            <MenuItem text="Types d'annotation" onAction="#onConfigAnnotationTypes"/>
            <MenuItem text="Types de field" onAction="#onConfigFieldTypes"/>
          </items>
        </Menu>
        <Menu text="Outil">
          <items>
            <MenuItem text="Valider le dictionnaire" onAction="#onValidateDictionary"/>
            <MenuItem text="Exporter en CSV" onAction="#onExportCsv"/>
          </items>
        </Menu>
      </menus>
    </MenuBar>
  </top>

  <!-- Left: TreeView navigation (5.7.2) -->
  <left>
    <VBox spacing="6" BorderPane.alignment="CENTER" styleClass="left-nav" prefWidth="200">
      <padding>
        <Insets top="10" right="6" bottom="10" left="6"/>
      </padding>
      <Label text="Navigation" styleClass="section-title"/>
      <TreeView fx:id="navTree" VBox.vgrow="ALWAYS" styleClass="nav-tree"/>
    </VBox>
  </left>

  <!-- Center + Right: SplitPane (5.8: table left, form right) -->
  <center>
    <SplitPane fx:id="mainSplit" dividerPositions="0.6" BorderPane.alignment="CENTER">
      <!-- Center: dynamic table area -->
      <VBox spacing="8" styleClass="center">
        <padding>
          <Insets top="10" right="10" bottom="10" left="10"/>
        </padding>
        <HBox alignment="CENTER_LEFT" spacing="12">
          <Label fx:id="viewTitle" text="Entrées" styleClass="panel-title"/>
          <HBox HBox.hgrow="ALWAYS"/>
          <Label fx:id="tableCountLabel" text="" styleClass="table-footer-text"/>
        </HBox>
        <HBox spacing="8" alignment="CENTER_LEFT">
          <TextField fx:id="searchField" promptText="Rechercher / Filtrer…" styleClass="search-input" HBox.hgrow="ALWAYS"/>
          <Button fx:id="addButton" text="+ Nouveau" onAction="#onCreateNewObject" styleClass="note-button"/>
        </HBox>
        <!-- Dynamic table container -->
        <StackPane fx:id="tableContainer" VBox.vgrow="ALWAYS"/>
      </VBox>

      <!-- Right: detail / editor panel -->
      <ScrollPane fitToWidth="true" styleClass="right-panel">
        <content>
          <VBox fx:id="rightContent" spacing="10">
            <padding>
              <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <Label text="Formulaire d'édition" styleClass="panel-title"/>
            <HBox spacing="8" alignment="CENTER_LEFT" styleClass="edit-header">
              <Label fx:id="editEntryTitle" text="(sélectionne un élément)" styleClass="edit-entry-title"/>
              <Label fx:id="editEntryCode" text="" styleClass="edit-entry-code"/>
            </HBox>
            <VBox fx:id="editorContainer" spacing="8"/>
            <HBox alignment="CENTER_RIGHT">
              <Button text="Modifier l'entrée" onAction="#onModifyEntry" styleClass="example-add-button"
                      maxWidth="1.7976931348623157E308" HBox.hgrow="ALWAYS"/>
            </HBox>
          </VBox>
        </content>
      </ScrollPane>
    </SplitPane>
  </center>

</BorderPane>
